---
- name: Install docker stack
#  hosts: '{{ vagrant_managed_host | default("testServers") }} '
  hosts:
    - vagrantHosts
  vars:
    dockerRepositoryUbuntuVersion: "focal"
    dockerTestImage: "hello-world"

  tasks:
    - include: ./playbooks/install-docker-stack-tasks.yml


- name: Deploy application
  hosts:
    - vagrantHosts
  tasks:
    - name: Copy docker-compose file to host
      copy:
        src: ../docker-compose/
        dest: /tmp/docker-compose
    - name: Run deployment using docker-compose
      docker_compose:
        project_name: photoneo-test
        project_src: /tmp/docker-compose